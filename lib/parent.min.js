(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a,c){var d,e,f,g,h,i,j,k;if(!a.Tagasauris)return k=function(a){var b,c,d,e,f,g,h,i,j;if(d=[],a instanceof Array)for(g=0,i=a.length;i>g;g++)c=a[g],c instanceof Array&&c.length>1&&d.push(""+c[0]+"="+encodeURIComponent(c[1]));else for(b in a)if(f=a[b],f instanceof Array)for(h=0,j=f.length;j>h;h++)e=f[h],d.push(""+b+"="+encodeURIComponent(e));else d.push(""+b+"="+encodeURIComponent(f));return d.join("&")},i=function(a){return a.replace(/(_[a-z])/g,function(a){return a.toUpperCase().replace("_","")})},j=function(a){return a.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()})},f=function(){function a(a){this.message=a,this.name="Exception"}return a.prototype.toString=function(){return this.message},a}(),d=function(){function a(){}return a.prototype.set=function(a,b){return this[a]=b},a.prototype.get=function(a,b){return null==b&&(b=null),this[a]||b},a}(),e=function(a){function c(a){null==a&&(a={}),this.set("logging",a.logging||!1)}return b(c,a),c.prototype.log=function(a){return this.get("logging")?console.log("Tagasauris."+this.constructor.name+": "+a):void 0},c}(d),g=function(c){function d(b){var c,e,g,h,j,k,l,m;if(null==b&&(b={}),d.__super__.constructor.call(this,b),!b.window)throw new f("Window is required");if(!b.target)throw new f("Target is required");for(c=a.addEventListener?"addEventListener":"attachEvent",e=a[c],h="attachEvent"===c?"onmessage":"message",e(h,this.notificationReceiver(this),!1),this.set("_window",b.window),this.set("_target",b.target),m=d.types,k=0,l=m.length;l>k;k++)j=m[k],g=i("on_"+j+"_receiver"),b[g]&&this.set(g,b[g])}var e,g,h,j;for(b(d,c),d.types=["start","started","success","error"],d.prototype.sendNotification=function(a,b){return null==b&&(b=""),this.log("Sending "+a),this._window.postMessage({type:a,notification:b},this._target)},d.prototype.notificationReceiver=function(a){return function(b){var c;return a.log("Received "+b.data.type+" from "+b.origin),0!==a._target.indexOf(b.origin)?a.log(new f("Invalid notification origin")):(c=i("on_"+b.data.type+"_receiver"),a[c]&&"function"==typeof a[c]?(a.log("Runing receiver "+c),a[c](b.data.notification)):void 0)}},j=d.types,g=0,h=j.length;h>g;g++)e=j[g],d.prototype[i("send_"+e)]=function(a){return function(b){return this.sendNotification(a,b)}}(e);return d}(e),h=function(a){function d(a){var b;if(null==a&&(a={}),d.__super__.constructor.call(this,a),!a.iFrame)throw new f("iFrame is required");if("string"!=typeof a.iFrame)throw new f("iFrame should be ID selector");if(a.iFrame=c.getElementById(a.iFrame),!a.iFrame)throw new f("Invalid iFrame ID");b=new g({logging:a.logging,window:a.iFrame.contentWindow,target:a.iFrame.getAttribute("src"),onSuccessReceiver:this._onSuccessReceiver(this),onStartedReceiver:this._onStartedReceiver(this),onErrorReceiver:this._onErrorReceiver(this)}),this.set("_iFrame",a.iFrame),this.set("notifications",b)}return b(d,a),d.prototype.start=function(){return this.notifications.sendStart()},d.prototype._onSuccessReceiver=function(a){return function(){return a.onSuccess()}},d.prototype._onStartedReceiver=function(a){return function(){return a.onStarted()}},d.prototype._onErrorReceiver=function(a){return function(){return a.onError()}},d.prototype.onSuccess=function(){return this.log(new f("onSuccess: Not implemented"))},d.prototype.onStarted=function(){return this.log(new f("onStarted: Not implemented"))},d.prototype.onError=function(){return this.log(new f("onError: Not implemented"))},d}(e),a.Tagasauris={VERSION:"0.0.1",ParentClient:h}}(window,document)}).call(this);