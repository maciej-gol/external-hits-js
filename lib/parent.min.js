(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a,c){var d,e,f,g,h,i,j,k;if(!a.Tagasauris)return k=function(a){var b,c,d,e,f,g,h,i,j;if(d=[],a instanceof Array)for(g=0,i=a.length;i>g;g++)c=a[g],c instanceof Array&&c.length>1&&d.push(""+c[0]+"="+encodeURIComponent(c[1]));else for(b in a)if(f=a[b],f instanceof Array)for(h=0,j=f.length;j>h;h++)e=f[h],d.push(""+b+"="+encodeURIComponent(e));else d.push(""+b+"="+encodeURIComponent(f));return d.join("&")},i=function(a){return a.replace(/(_[a-z])/g,function(a){return a.toUpperCase().replace("_","")})},j=function(a){return a.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()})},f=function(){function a(a){this.message=a,this.name="Exception"}return a.prototype.toString=function(){return this.message},a}(),d=function(){function a(){}return a.prototype.set=function(a,b){return this[a]=b},a.prototype.get=function(a,b){return null==b&&(b=null),this[a]||b},a}(),e=function(a){function c(a){null==a&&(a={}),this.set("logging",a.logging||!1)}return b(c,a),c.prototype.log=function(a){return this.get("logging")?console.log("Tagasauris: "+a):void 0},c}(d),g=function(c){function d(b){var c,e,g;if(null==b&&(b={}),d.__super__.constructor.call(this,b),!b.window)throw new f("Window is required");if(!b.target)throw new f("Target is required");c=a.addEventListener?"addEventListener":"attachEvent",e=a[c],g="attachEvent"===c?"onmessage":"message",e(g,this.messageReceiver(this),!1),this.set("_window",b.window),this.set("_target",b.target),this.set("_messageReceivedListener",b.messageReceivedListener||null)}var e,g,h,j;for(b(d,c),d.prototype.sendMessage=function(a,b){return this.log("Sending message: "+a+" - "+b),this._window.postMessage({type:a,message:b},this._target)},d.prototype.messageReceiver=function(a){return function(b){return a.log("Message received: "+b.data.type+" - "+b.data.message),"function"==typeof a._messageReceivedListener?a._messageReceivedListener(b.data.type,b.data.message):void 0}},j=["success","info","warning","error"],g=0,h=j.length;h>g;g++)e=j[g],d.prototype[i("send_"+e+"_message")]=function(a){return function(b){return this.sendMessage(a,b)}}(e);return d}(e),h=function(a){function d(a){var b;if(null==a&&(a={}),d.__super__.constructor.call(this,a),!a.iFrame)throw new f("iFrame is required");if("string"==typeof a.iFrame&&(a.iFrame=c.getElementById(a.iFrame),!a.iFrame))throw new f("Invalid iFrame ID");b=new g({window:a.iFrame.contentWindow,target:a.iFrame.getAttribute("src"),onSuccessCallback:a.onSuccessCallback||null,onErrorCallback:a.onErrorCallback||null}),this.set("_iFrame",a.iFrame),this.set("_messages",b)}return b(d,a),d.prototype.start=function(){},d}(e),a.Tagasauris={VERSION:"0.0.1",Client:h}}(window,document)}).call(this);